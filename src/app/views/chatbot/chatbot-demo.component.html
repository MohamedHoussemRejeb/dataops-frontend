<div class="chatbot-shell card">
  <!-- Header -->
  <div class="chatbot-header d-flex align-items-center justify-content-between">
    <div class="d-flex align-items-center gap-2">
<div class="bot-avatar">
  <img src="assets/images/logo-house.png" alt="Logo" />
</div>
      <div>
        <div class="title">Assistant DataOps</div>
        <div class="subtitle">
          <span class="status-dot"></span>
          ConnectÃ© Ã  lâ€™API du PFE
        </div>
      </div>
    </div>

    <div class="badge-version">
      v1.0 Â· Digital Expert AI
    </div>
  </div>

  <!-- Corps -->
  <div class="chatbot-body">
    <!-- FenÃªtre de chat -->
    <div class="chat-window custom-scrollbar">
      <!-- Message systÃ¨me de bienvenue -->
      <div class="msg-row">
        <div class="msg msg-bot">
          <div class="msg-meta">Assistant Â· systÃ¨me</div>
          <div class="msg-text">
            Bonjour ðŸ‘‹  
            Je suis ton copilote DataOps.  
            Pose-moi des questions sur tes jobs Talend, ton catalogue, la qualitÃ© des donnÃ©es ou lâ€™Ã©tat global de ta plateforme.
          </div>
        </div>
      </div>

      <!-- DerniÃ¨re question (user) -->
      <div class="msg-row msg-row-user" *ngIf="prompt.trim()">
        <div class="msg msg-user">
          <div class="msg-meta">Toi</div>
          <div class="msg-text">
            {{ prompt }}
          </div>
        </div>
      </div>

      <!-- RÃ©ponse -->
      <div class="msg-row" *ngIf="response">
        <div class="msg msg-bot">
          <div class="msg-meta">Assistant</div>
          <div class="msg-text">
            {{ response }}
          </div>
        </div>
      </div>

      <!-- Typing / chargement -->
      <div class="msg-row" *ngIf="loading">
        <div class="msg msg-bot typing">
          <div class="msg-meta">Assistant</div>
          <div class="typing-dots">
            <span></span><span></span><span></span>
          </div>
        </div>
      </div>
    </div>

    <!-- Sidebar -->
    <div class="chat-sidebar">
      <div class="sidebar-section">
        <h6>Questions rapides</h6>

        <button
          type="button"
          class="pill"
          (click)="useSuggestion('Donne-moi un rÃ©sumÃ© de lâ€™Ã©tat de la plateforme DataOps aujourdâ€™hui.')">
          RÃ©sumÃ© de la plateforme
        </button>

        <button
          type="button"
          class="pill"
          (click)="useSuggestion('Quels jobs Talend ont Ã©chouÃ© dans les derniÃ¨res 24 heures ?')">
          Jobs en erreur (24h)
        </button>

        <button
          type="button"
          class="pill"
          (click)="useSuggestion('Explique-moi le lineage complet du dataset SALES_DWH_ORDERS.')">
          Lineage dâ€™un dataset
        </button>

        <button
          type="button"
          class="pill"
          (click)="useSuggestion('Quels datasets ont une sensibilitÃ© Ã©levÃ©e et un niveau de risque Ã©levÃ© ?')">
          Risque & sensibilitÃ©
        </button>

        <button
          type="button"
          class="pill"
          (click)="useSuggestion('Quels jobs ont dÃ©passÃ© leur SLA cette semaine ?')">
          Jobs hors SLA
        </button>
      </div>

<div class="sidebar-section small">
  <img src="assets/images/house-digital-experts.png"
       alt="The House of Digital Experts"
       class="house-banner"/>
</div>
    </div>
  </div>

  <!-- Zone dâ€™entrÃ©e -->
  <div class="chat-input">
    <div class="input-wrapper">
      <textarea
        [(ngModel)]="prompt"
        name="prompt"
        rows="2"
        class="form-control chat-textarea"
        [disabled]="loading"
        placeholder="Pose ta question DataOpsâ€¦ (ex : Quels datasets ont le plus dâ€™erreurs de qualitÃ© ?)"></textarea>

      <div class="input-actions">
        <button
          type="button"
          class="btn btn-primary send-btn"
          (click)="send()"
          [disabled]="loading || !prompt.trim()">

          <ng-container *ngIf="!loading; else loadingTpl">
            Envoyer
          </ng-container>

          <ng-template #loadingTpl>
            <span class="spinner-border spinner-border-sm" role="status"></span>
            <span class="ms-1">Analyseâ€¦</span>
          </ng-template>
        </button>
      </div>
    </div>

    <div class="helper-text">
      Les rÃ©ponses peuvent inclure des mÃ©triques (SLA, volumÃ©trie, qualitÃ©) calculÃ©es par ta plateforme DataOps.
    </div>
  </div>
</div>
