<div class="card p-3">
  <label class="form-label">Importer PDF (OCR)</label>

  <div class="border rounded p-4 text-center"
       (drop)="onDrop($event)"
       (dragover)="$event.preventDefault()">
    Glissez un PDF ici ou
    <input type="file" accept="application/pdf" (change)="onPick($event)" />
  </div>

  <div class="mt-3" *ngIf="error()" >
    <div class="alert alert-danger">{{ error() }}</div>
  </div>

  <div class="mt-3" *ngIf="loading()">
    <div class="text-muted">Analyse OCR en cours…</div>
  </div>

  <div *ngIf="previewText()" class="mt-3">
    <strong>Aperçu OCR (texte)</strong>
    <pre class="small bg-light p-2">{{ previewText() }}</pre>
  </div>

  <div *ngIf="previewTable()?.length" class="mt-3">
    <strong>Détection de table</strong>
    <div class="table-responsive">
      <table class="table table-sm">
        <thead>
          <tr><th *ngFor="let k of tableKeys">{{ k }}</th></tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of previewTable()">
            <td *ngFor="let k of tableKeys">{{ row[k] }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
